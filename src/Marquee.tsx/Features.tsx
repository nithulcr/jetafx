'use client';

import { useEffect, useRef } from 'react';
import { gsap } from 'gsap';
import { ScrollTrigger } from 'gsap/ScrollTrigger';
import Heading from '@/Marquee.tsx/Heading';
import AnimatedButton from "./AnimatedButton";



gsap.registerPlugin(ScrollTrigger);

const Features = [
    {
        title: 'Fast account verification process',
        desc: 'Start trading within hours with our quick and hassle-free onboarding.',
        icon: <><svg width="35" height="35" viewBox="0 0 35 35" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M21.448 5.05287C21.8381 4.96322 22.2464 4.99725 22.6162 5.15023C22.9861 5.30321 23.2991 5.56755 23.5119 5.90655L25.4274 8.96477C25.5818 9.21109 25.79 9.41927 26.0363 9.57372L29.0945 11.4892C29.4342 11.7018 29.6992 12.015 29.8526 12.3853C30.0059 12.7556 30.04 13.1644 29.9501 13.555L29.1408 17.0699C29.0755 17.354 29.0755 17.6492 29.1408 17.9332L29.9501 21.4501C30.0392 21.8401 30.0046 22.2481 29.8513 22.6176C29.698 22.987 29.4335 23.2996 29.0945 23.512L26.0363 25.4294C25.79 25.5839 25.5818 25.7921 25.4274 26.0384L23.5119 29.0966C23.2994 29.4359 22.9865 29.7007 22.6166 29.854C22.2467 30.0073 21.8383 30.0417 21.448 29.9522L17.9312 29.1428C17.6477 29.0778 17.3532 29.0778 17.0698 29.1428L13.5529 29.9522C13.1626 30.0417 12.7542 30.0073 12.3843 29.854C12.0145 29.7007 11.7015 29.4359 11.489 29.0966L9.57357 26.0384C9.41857 25.7918 9.20971 25.5836 8.9627 25.4294L5.9064 23.5139C5.56705 23.3015 5.30232 22.9885 5.14898 22.6187C4.99565 22.2488 4.96133 21.8404 5.0508 21.4501L5.85823 17.9332C5.92352 17.6492 5.92352 17.354 5.85823 17.0699L5.04887 13.555C4.95915 13.1642 4.99355 12.7552 5.14725 12.3849C5.30096 12.0147 5.56634 11.7015 5.9064 11.4892L8.9627 9.57372C9.20971 9.4195 9.41857 9.2113 9.57357 8.96477L11.489 5.90655C11.7017 5.56792 12.0144 5.30382 12.3839 5.15086C12.7533 4.9979 13.1612 4.96365 13.551 5.05287L17.0698 5.86031C17.3532 5.9253 17.6477 5.9253 17.9312 5.86031L21.448 5.05287Z" stroke="#829CFF" strokeWidth="2" />
            <path d="M12.7109 18.5345L16.6325 22.2903L22.2883 12.7129" stroke="#829CFF" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
        </svg>
        </>,
    },
    {
        title: 'Multiple deposit & withdrawal methods',
        desc: 'Fund and withdraw using your preferred local or international payment options.',
        icon: <><svg width="26" height="33" viewBox="0 0 26 33" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M11.2266 3.1776V16.509C11.2266 16.7266 11.1401 16.9353 10.9863 17.0891C10.8325 17.2429 10.6238 17.3294 10.4062 17.3294C10.1887 17.3294 9.98004 17.2429 9.8262 17.0891C9.67236 16.9353 9.58594 16.7266 9.58594 16.509V3.1776L6.61094 6.15123C6.45543 6.29613 6.24976 6.37502 6.03724 6.37127C5.82472 6.36752 5.62196 6.28143 5.47166 6.13113C5.32137 5.98083 5.23528 5.77807 5.23153 5.56555C5.22778 5.35304 5.30666 5.14736 5.45156 4.99186L9.82656 0.616856C9.98037 0.463239 10.1889 0.376953 10.4062 0.376953C10.6236 0.376953 10.8321 0.463239 10.9859 0.616856L15.3609 4.99186C15.4415 5.06696 15.5062 5.15752 15.551 5.25814C15.5958 5.35877 15.62 5.46739 15.6219 5.57753C15.6238 5.68768 15.6036 5.79709 15.5623 5.89923C15.5211 6.00137 15.4597 6.09416 15.3818 6.17205C15.3039 6.24995 15.2111 6.31136 15.1089 6.35262C15.0068 6.39387 14.8974 6.41413 14.7872 6.41219C14.6771 6.41025 14.5685 6.38614 14.4678 6.3413C14.3672 6.29647 14.2767 6.23183 14.2016 6.15123L11.2266 3.1776ZM19.9766 16.0565V12.134C19.9766 11.6264 19.7749 11.1396 19.4159 10.7806C19.057 10.4216 18.5701 10.22 18.0625 10.22H15.875C15.6574 10.22 15.4488 10.3064 15.295 10.4602C15.1411 10.6141 15.0547 10.8227 15.0547 11.0403C15.0547 11.2579 15.1411 11.4665 15.295 11.6203C15.4488 11.7742 15.6574 11.8606 15.875 11.8606H18.0625C18.135 11.8606 18.2046 11.8894 18.2558 11.9407C18.3071 11.992 18.3359 12.0615 18.3359 12.134V23.911C17.8381 23.1269 17.0532 22.5689 16.1491 22.3562C15.245 22.1435 14.2936 22.2931 13.4984 22.7729C12.7033 23.2528 12.1275 24.0248 11.8943 24.9238C11.661 25.8228 11.7889 26.7774 12.2506 27.5833C12.2506 27.5969 12.2656 27.6092 12.2738 27.6229L15.3172 32.2713C15.4432 32.4364 15.627 32.5475 15.8317 32.5823C16.0364 32.6172 16.2467 32.573 16.4202 32.4589C16.5936 32.3448 16.7173 32.1691 16.7664 31.9674C16.8154 31.7656 16.7861 31.5527 16.6844 31.3717L13.6602 26.7452C13.4087 26.3041 13.3428 25.7811 13.4769 25.2914C13.6109 24.8017 13.9341 24.3853 14.3752 24.1338C14.8163 23.8824 15.3392 23.8164 15.8289 23.9505C16.3187 24.0846 16.7351 24.4078 16.9865 24.8489C16.9935 24.8625 17.0013 24.8758 17.0098 24.8885L18.4727 27.1171C18.5698 27.2636 18.7115 27.375 18.8768 27.4349C19.042 27.4948 19.2222 27.5 19.3907 27.4497C19.5591 27.3995 19.707 27.2965 19.8125 27.1558C19.918 27.0152 19.9755 26.8444 19.9766 26.6686V18.0909C21.1694 19.0728 22.131 20.3059 22.7927 21.702C23.4544 23.0982 23.7999 24.6232 23.8047 26.1682V31.8215C23.8047 32.0391 23.8911 32.2478 24.045 32.4016C24.1988 32.5554 24.4074 32.6419 24.625 32.6419C24.8426 32.6419 25.0512 32.5554 25.205 32.4016C25.3589 32.2478 25.4453 32.0391 25.4453 31.8215V26.1682C25.4392 24.1623 24.9365 22.1892 23.9823 20.4248C23.0281 18.6604 21.6519 17.1597 19.9766 16.0565ZM4.9375 10.22H2.75C2.24236 10.22 1.75551 10.4216 1.39655 10.7806C1.0376 11.1396 0.835938 11.6264 0.835938 12.134V26.3528C0.835938 26.5704 0.922363 26.779 1.0762 26.9328C1.23004 27.0867 1.43869 27.1731 1.65625 27.1731C1.87381 27.1731 2.08246 27.0867 2.2363 26.9328C2.39014 26.779 2.47656 26.5704 2.47656 26.3528V12.134C2.47656 12.0615 2.50537 11.992 2.55665 11.9407C2.60793 11.8894 2.67748 11.8606 2.75 11.8606H4.9375C5.15506 11.8606 5.36371 11.7742 5.51755 11.6203C5.67139 11.4665 5.75781 11.2579 5.75781 11.0403C5.75781 10.8227 5.67139 10.6141 5.51755 10.4602C5.36371 10.3064 5.15506 10.22 4.9375 10.22Z" fill="#829CFF" />
        </svg>
        </>,
    },
    {
        title: 'Negative balance protection',
        desc: 'Trade confidently knowing your losses will never exceed your deposits.',
        icon: <><svg width="31" height="31" viewBox="0 0 31 31" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M11.125 19.8848H16.5938C17.7969 19.8848 18.7812 18.9004 18.7812 17.6973C18.7812 16.4941 17.7969 15.5098 16.5938 15.5098H14.4062C13.2031 15.5098 12.2188 14.5254 12.2188 13.3223C12.2188 12.1191 13.2031 11.1348 14.4062 11.1348H19.875M15.5 7.85352V10.4063M15.5 18.791V23.166M29.7188 15.5098C29.7187 19.2808 28.2207 22.8974 25.5542 25.5639C22.8876 28.2305 19.271 29.7285 15.5 29.7285C11.729 29.7285 8.11236 28.2305 5.44583 25.5639C2.77929 22.8974 1.28125 19.2808 1.28125 15.5098C1.28125 11.7387 2.77929 8.12212 5.44583 5.45559C8.11236 2.78906 11.729 1.29102 15.5 1.29102C19.271 1.29102 22.8876 2.78906 25.5542 5.45559C28.2207 8.12212 29.7187 11.7387 29.7188 15.5098Z" stroke="#829CFF" strokeWidth="1.5" strokeMiterlimit="10" strokeLinejoin="round" />
        </svg>
        </>,
    },
    {
        title: 'Access to global financial markets',
        desc: 'Explore diverse opportunities across forex, commodities, indices, and stocks.',
        icon: <><svg width="31" height="31" viewBox="0 0 31 31" fill="none" xmlns="http://www.w3.org/2000/svg">
            <g clipPath="url(#clip0_1393_1832)">
                <path d="M0.0329375 16.1471C0.375875 24.3922 7.17166 31 15.5 31C23.8283 31 30.6241 24.3922 30.9671 16.1471C30.9873 16.0952 30.9985 16.0401 31 15.9844C31 15.9495 30.9874 15.9195 30.9806 15.8875C30.9835 15.7577 31 15.6308 31 15.5C31 6.95369 24.0463 0 15.5 0C6.95369 0 0 6.95369 0 15.5C0 15.6308 0.0164688 15.7577 0.019375 15.8875C0.0125937 15.9195 0 15.9495 0 15.9844C0 16.0425 0.0145313 16.0958 0.0329375 16.1471ZM24.1422 22.0313C22.8257 21.4854 21.4578 21.0729 20.0589 20.8C20.212 19.3924 20.3021 17.9306 20.3302 16.4697H25.1546C25.0664 18.4595 24.7128 20.3379 24.1422 22.0313ZM26.1223 16.4688H29.9818C29.8103 19.1062 28.918 21.6459 27.4021 23.8109C26.6491 23.2802 25.8529 22.8135 25.0218 22.4159C25.6467 20.6053 26.0313 18.5961 26.1223 16.4688ZM12.0018 21.5896C13.159 21.407 14.3285 21.3143 15.5 21.3125C16.6858 21.3125 17.857 21.4113 18.9972 21.5896C18.3249 26.7578 16.8562 30.0312 15.5 30.0312C14.1438 30.0312 12.6751 26.7578 12.0018 21.5896ZM13.4734 29.7057C10.8083 28.8513 8.55406 26.3432 7.19394 22.94C8.44005 22.4197 9.73488 22.0248 11.0592 21.761C11.5039 25.1478 12.3167 28.0986 13.4734 29.7057ZM11.8904 10.3743C13.0846 10.5605 14.2914 10.6547 15.5 10.6562C16.7086 10.6547 17.9154 10.5605 19.1096 10.3743C19.2762 11.9437 19.375 13.6565 19.375 15.5H11.625C11.625 13.6565 11.7238 11.9437 11.8904 10.3743ZM19.3605 16.4688C19.3374 17.8574 19.2533 19.2444 19.1086 20.6257C17.9147 20.4396 16.7083 20.3453 15.5 20.3438C14.2914 20.3453 13.0846 20.4395 11.8904 20.6257C11.7457 19.2444 11.6617 17.8574 11.6386 16.4688H19.3605ZM19.9417 21.761C21.3018 22.0342 22.599 22.4314 23.807 22.94C22.4469 26.3432 20.1926 28.8513 17.5276 29.7057C18.6833 28.0986 19.4961 25.1478 19.9417 21.761ZM20.3438 15.5C20.3438 13.7214 20.2449 11.9195 20.0589 10.2009C21.4927 9.91806 22.8644 9.50344 24.1422 8.96966C24.8048 10.9352 25.1875 13.1498 25.1875 15.5H20.3438ZM19.9417 9.23897C19.4961 5.85222 18.6843 2.90044 17.5266 1.29425C20.1917 2.14869 22.4459 4.65678 23.8061 8.06C22.5607 8.58146 21.2661 8.97643 19.9417 9.23897ZM18.9982 9.41044C17.857 9.58869 16.6858 9.6875 15.5 9.6875C14.3142 9.6875 13.143 9.58869 12.0018 9.41044C12.6751 4.24216 14.1438 0.96875 15.5 0.96875C16.8562 0.96875 18.3249 4.24216 18.9982 9.41044ZM11.0583 9.23897C9.73391 8.97524 8.43908 8.5803 7.19297 8.06C8.55309 4.65678 10.8074 2.14869 13.4724 1.29425C12.3167 2.90141 11.5039 5.85222 11.0583 9.23897ZM10.9411 10.2009C10.7513 11.9609 10.6562 13.7298 10.6562 15.5H5.8125C5.8125 13.1498 6.19516 10.9353 6.85778 8.96869C8.13556 9.50344 9.50731 9.91709 10.9411 10.2009ZM10.6698 16.4688C10.6979 17.9296 10.788 19.3915 10.9411 20.8C9.50731 21.0829 8.13556 21.4975 6.85778 22.0313C6.28719 20.3379 5.93359 18.4595 5.84544 16.4688H10.6698ZM5.97719 22.4159C5.14649 22.8136 4.35062 23.2802 3.59794 23.8109C2.08204 21.6459 1.18968 19.1062 1.01816 16.4688H4.87766C4.96872 18.5961 5.35331 20.6053 5.97719 22.4159ZM4.17822 24.5869C4.85593 24.109 5.5709 23.6862 6.31625 23.3227C7.28887 25.73 8.68872 27.7285 10.3714 29.0799C7.94385 28.1603 5.80581 26.6092 4.17822 24.5869ZM20.6286 29.079C22.3123 27.7285 23.7111 25.729 24.6838 23.3217C25.4491 23.6937 26.1582 24.1219 26.8218 24.5859C25.1948 26.6089 23.0566 28.1602 20.6286 29.079ZM26.1562 15.5C26.1562 13.0132 25.7416 10.6688 25.0228 8.58409C25.8753 8.17528 26.6678 7.70544 27.403 7.18909C29.1146 9.62236 30.0326 12.5251 30.0312 15.5H26.1562ZM26.8228 6.41313C26.1592 6.87716 25.45 7.30534 24.6847 7.67734C23.7121 5.27 22.3123 3.2705 20.6295 1.92006C23.0569 2.8401 25.1948 4.39113 26.8228 6.41313ZM10.3714 1.92103C8.68775 3.27147 7.28887 5.27097 6.31625 7.67831C5.57087 7.31447 4.8559 6.89138 4.17822 6.41313C5.80561 4.3908 7.94373 2.83997 10.3714 1.92103ZM3.59794 7.18909C4.35062 7.7198 5.14649 8.18644 5.97719 8.58409C5.22034 10.8111 4.83735 13.1479 4.84375 15.5H0.96875C0.96875 12.4097 1.94622 9.54703 3.59794 7.18909Z" fill="#829CFF" />
            </g>
            <defs>
                <clipPath id="clip0_1393_1832">
                    <rect width="31" height="31" fill="white" />
                </clipPath>
            </defs>
        </svg>
        </>,
    },
    {
        title: 'Transparent fee structure',
        desc: 'Enjoy clear, upfront pricing with no hidden charges.',
        icon: <><svg width="29" height="25" viewBox="0 0 29 25" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M6.625 7.25C6.85706 7.25 7.07962 7.15781 7.24372 6.99372C7.40781 6.82962 7.5 6.60706 7.5 6.375C7.5 6.14294 7.40781 5.92038 7.24372 5.75628C7.07962 5.59219 6.85706 5.5 6.625 5.5C6.39294 5.5 6.17038 5.59219 6.00628 5.75628C5.84219 5.92038 5.75 6.14294 5.75 6.375C5.75 6.60706 5.84219 6.82962 6.00628 6.99372C6.17038 7.15781 6.39294 7.25 6.625 7.25ZM5.75 12.5C5.75 12.2679 5.84219 12.0454 6.00628 11.8813C6.17038 11.7172 6.39294 11.625 6.625 11.625H11.875C12.1071 11.625 12.3296 11.7172 12.4937 11.8813C12.6578 12.0454 12.75 12.2679 12.75 12.5C12.75 12.7321 12.6578 12.9546 12.4937 13.1187C12.3296 13.2828 12.1071 13.375 11.875 13.375H6.625C6.39294 13.375 6.17038 13.2828 6.00628 13.1187C5.84219 12.9546 5.75 12.7321 5.75 12.5ZM6.625 17.75C6.39294 17.75 6.17038 17.8422 6.00628 18.0063C5.84219 18.1704 5.75 18.3929 5.75 18.625C5.75 18.8571 5.84219 19.0796 6.00628 19.2437C6.17038 19.4078 6.39294 19.5 6.625 19.5H11.875C12.1071 19.5 12.3296 19.4078 12.4937 19.2437C12.6578 19.0796 12.75 18.8571 12.75 18.625C12.75 18.3929 12.6578 18.1704 12.4937 18.0063C12.3296 17.8422 12.1071 17.75 11.875 17.75H6.625ZM4 24.75H18.8207C19.9583 24.785 21.1185 24.1165 21.4492 22.6903L22.1895 19.5H25.875C26.5712 19.5 27.2389 19.2234 27.7312 18.7312C28.2234 18.2389 28.5 17.5712 28.5 16.875V8.2685C28.5 6.54825 27.1857 5.5385 25.847 5.5H18V2.875C18 2.17881 17.7234 1.51113 17.2312 1.01884C16.7389 0.526562 16.0712 0.25 15.375 0.25H3.125C2.42881 0.25 1.76113 0.526562 1.26884 1.01884C0.776562 1.51113 0.5 2.17881 0.5 2.875V21.25C0.5 22.1783 0.868749 23.0685 1.52513 23.7249C2.1815 24.3813 3.07174 24.75 4 24.75ZM2.25 2.875C2.25 2.64294 2.34219 2.42038 2.50628 2.25628C2.67038 2.09219 2.89294 2 3.125 2H15.375C15.6071 2 15.8296 2.09219 15.9937 2.25628C16.1578 2.42038 16.25 2.64294 16.25 2.875V22.0935C16.2523 22.426 16.299 22.7282 16.39 23H4C3.53587 23 3.09075 22.8156 2.76256 22.4874C2.43437 22.1592 2.25 21.7141 2.25 21.25V2.875ZM25.875 17.75H22.5972L24.8495 8.0515C25.1085 6.935 26.75 7.124 26.75 8.2685V16.875C26.75 17.1071 26.6578 17.3296 26.4937 17.4937C26.3296 17.6578 26.1071 17.75 25.875 17.75ZM18 7.25H23.2675C23.2208 7.37833 23.18 7.51308 23.145 7.65425L19.7447 22.2948C19.5068 23.3185 18 23.1453 18 22.0935V7.25Z" fill="#829CFF" />
        </svg>
        </>,
    },
];

export default function GlobalMarketAccessSection() {
    const featuresRef = useRef<HTMLDivElement>(null);

    useEffect(() => {
        const ctx = gsap.context(() => {

            // Animation for features list staggered
            gsap.from('.gma-feature', {
                opacity: 0,
                y: 40,
                duration: 0.8,
                stagger: 0.15,
                ease: 'power2.out',
                scrollTrigger: {
                    trigger: featuresRef.current,
                    start: 'top 75%',
                    end: 'bottom 0%',
                    toggleActions: 'play reverse play reverse'
                },
            });
        }, featuresRef);

        return () => {
            ctx.revert();
        };
    }, []);

    return (
        <section className="relative  features">
            <div className=' py-12 lg:pt-14 lg:pb-24 max-w-[1460px] mx-auto px-6'>
                <Heading
                    badgeText="WHY PEOPLE CHOOSE US"
                    title="Global Market Access"
                    subtitle="Trade Anytime, Anywhere"
                />
                <div
                    ref={featuresRef}
                    className="grid md:grid-cols-2 gap-10 lg:gap-16 mt-12"
                >

                    {/* Left Section */}
                    <div className="mb-4 text-center md:text-left lg:sticky lg:top-[120px] h-fit">
                        <h3 className="text-2xl md:text-3xl text-white mb-3 gma-feature">Start Trading Today</h3>
                        <p className="text-gray-400  mb-5 max-w-[440px] gma-feature mx-auto md:mx-0 ">
                            Open your account in minutes, access global markets, and trade with confidence.
                        </p>
                        <AnimatedButton href="" label="Open Account" className="w-fit mx-auto md:mx-0 gma-feature" />
                    </div>

                    {/* Features List */}
                    <div className="flex-1 grid gap-8">
                        {Features.map((feat, i) => (
                            <div
                                key={i}
                                className="gma-feature flex items-start gap-4 lg:gap-8"
                            >
                                <span className="shuffle w-10 h-10 md:w-13 md:h-13 flex items-center justify-center shadow-[inset_0px_2px_4px_rgba(138,165,255,0.5)] p-2 rounded-lg"><span className='shuffle'>{feat.icon}</span></span>
                                <div className=''>
                                    <h4 className="text-lg lg:text-xl  text-white mb-2">{feat.title}</h4>
                                    <p className="text-gray-400 text-sm max-w-[420px]">{feat.desc}</p>
                                </div>
                            </div>
                        ))}
                    </div>
                </div>
            </div>
        </section>
    );
}
